{"ast":null,"code":"var _jsxFileName = \"/Users/sergeygvozdetskiy/Desktop/movie-app/movie-app/src/components/\\u0441atalog/Catalog.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport \"./catalog.scss\";\nimport SearchMovie from \"../searchMovies/SearchMovies\";\nimport MovieCard from \"../movieCard/MovieCard\";\nimport MoviesGenre from \"../moviesGenre/MoviesGenre\";\nimport { category as cate, getGenreList, getMoviesList, getMoviesByGenreList, getMoviesSearch } from \"../../api/apiConfig\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Catalog = () => {\n  _s();\n\n  const {\n    category\n  } = useParams();\n  const [items, setItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(0);\n  useEffect(() => {\n    const getList = async () => {\n      let data = null;\n\n      if (category === cate.movie) {\n        data = await getMoviesList(cate.movie);\n        setGenres(await getGenreList(cate.movie));\n      } else {\n        data = await getMoviesList(cate.tv);\n        setGenres(await getGenreList(cate.tv));\n      }\n\n      setItems(data.results);\n      setTotalPage(data.total_pages);\n    };\n\n    getList();\n  }, [category]);\n  const changeCategory = category === cate.movie ? \"movie\" : \"tv\";\n\n  const loadMore = async () => {\n    let data = await getMoviesList(changeCategory, page + 1);\n    setItems([...items, ...data.results]);\n    setPage(page + 1);\n  };\n\n  const handkeGenreClick = async id => {\n    const data = await getMoviesByGenreList(category, id);\n    setItems(data.results);\n  };\n\n  const handleOnSubmit = async e => {\n    e.preventDefault();\n\n    if (searchTerm) {\n      setItems(await getMoviesSearch(category, searchTerm));\n      setSearchTerm(\"\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"header__title\",\n          children: category === cate.movie ? \"Movie\" : \"Tv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"catalog__search search\",\n          children: /*#__PURE__*/_jsxDEV(SearchMovie, {\n            setSearchTerm: setSearchTerm,\n            handleOnSubmit: handleOnSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"catalog\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"genre-list\",\n          children: /*#__PURE__*/_jsxDEV(MoviesGenre, {\n            genres: genres,\n            handkeGenreClick: handkeGenreClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"catalog__movie-list\",\n          children: items.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"catalog__card\",\n            children: /*#__PURE__*/_jsxDEV(MovieCard, {\n              item: item,\n              category: category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loader\",\n          children: page < totalPage ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"loader__btn btn btn_pink\",\n            onClick: () => loadMore(),\n            children: \"load more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Catalog, \"PsZkdzVdYIr9D96k84Io8xQpCtg=\", false, function () {\n  return [useParams];\n});\n\n_c = Catalog;\nexport default Catalog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Catalog\");","map":{"version":3,"names":["React","useEffect","useState","useParams","SearchMovie","MovieCard","MoviesGenre","category","cate","getGenreList","getMoviesList","getMoviesByGenreList","getMoviesSearch","Catalog","items","setItems","searchTerm","setSearchTerm","genres","setGenres","page","setPage","totalPage","setTotalPage","getList","data","movie","tv","results","total_pages","changeCategory","loadMore","handkeGenreClick","id","handleOnSubmit","e","preventDefault","map","item","i"],"sources":["/Users/sergeygvozdetskiy/Desktop/movie-app/movie-app/src/components/Ñatalog/Catalog.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"./catalog.scss\";\n\nimport SearchMovie from \"../searchMovies/SearchMovies\";\nimport MovieCard from \"../movieCard/MovieCard\";\nimport MoviesGenre from \"../moviesGenre/MoviesGenre\";\n\nimport {\n  category as cate,\n  getGenreList,\n  getMoviesList,\n  getMoviesByGenreList,\n  getMoviesSearch,\n} from \"../../api/apiConfig\";\n\nconst Catalog = () => {\n  const { category } = useParams();\n  const [items, setItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(0);\n  useEffect(() => {\n    const getList = async () => {\n      let data = null;\n      if (category === cate.movie) {\n        data = await getMoviesList(cate.movie);\n        setGenres(await getGenreList(cate.movie));\n      } else {\n        data = await getMoviesList(cate.tv);\n        setGenres(await getGenreList(cate.tv));\n      }\n      setItems(data.results);\n      setTotalPage(data.total_pages);\n    };\n    getList();\n  }, [category]);\n\n  const changeCategory = category === cate.movie ? \"movie\" : \"tv\";\n  const loadMore = async () => {\n    let data = await getMoviesList(changeCategory, page + 1);\n    setItems([...items, ...data.results]);\n    setPage(page + 1);\n  };\n\n  const handkeGenreClick = async (id) => {\n    const data = await getMoviesByGenreList(category, id);\n    setItems(data.results);\n  };\n\n  const handleOnSubmit = async (e) => {\n    e.preventDefault();\n\n    if (searchTerm) {\n      setItems(await getMoviesSearch(category, searchTerm));\n      setSearchTerm(\"\");\n    }\n  };\n  return (\n    <>\n      <header className=\"header\">\n        <div className=\"container\">\n          <h1 className=\"header__title\">\n            {category === cate.movie ? \"Movie\" : \"Tv\"}\n          </h1>\n          <div className=\"catalog__search search\">\n            <SearchMovie\n              setSearchTerm={setSearchTerm}\n              handleOnSubmit={handleOnSubmit}\n            />\n          </div>\n        </div>\n      </header>\n      <main className=\"catalog\">\n        <div className=\"container container-fluid\">\n          <div className=\"genre-list\">\n            <MoviesGenre genres={genres} handkeGenreClick={handkeGenreClick} />\n          </div>\n          <div className=\"catalog__movie-list\">\n            {items.map((item, i) => (\n              <div key={i} className=\"catalog__card\">\n                <MovieCard item={item} category={category} />\n              </div>\n            ))}\n          </div>\n          <div className=\"loader\">\n            {page < totalPage ? (\n              <button\n                className=\"loader__btn btn btn_pink\"\n                onClick={() => loadMore()}\n              >\n                load more\n              </button>\n            ) : null}\n          </div>\n        </div>\n      </main>\n    </>\n  );\n};\n\nexport default Catalog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}